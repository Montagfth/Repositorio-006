<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pedidos - Pizza Factory</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .pizza-img {
            width: 180px;
            height: 180px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid #ffffff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            margin: 0 auto 15px;
            display: block;
        }
        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
        }
        .modal-header {
            background-color: #dc3545;
            color: white;
        }
        .form-label {
            font-weight: 600;
        }
    </style>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/index">Pizza Factory</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/eventos">Eventos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/locales">Locales</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/pedidos" >Pedidos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contactanos" >Contáctanos</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<main class="container py-5">
    <h2 class="text-center mb-4">Catálogo de Pizzas</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4">

        <!-- Americana -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/americana.jpg" alt="Americana" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Pizza Americana</h5>
                    <p class="card-text">Jamón, Queso Mozzarella, Orégano y Salsa Especial.</p>
                    <p><strong>Precios:</strong> Personal S/22 | Mediana S/32 | Familiar S/42</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Americana" data-ingredientes="Jamón, Mozzarella, Orégano, Salsa Especial">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>

        <!-- Peperoni -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/peperoni.jpg" alt="Peperoni" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Pizza Peperoni</h5>
                    <p class="card-text">Peperoni, Queso Mozzarella y Salsa de la Casa.</p>
                    <p><strong>Precios:</strong> Personal S/23 | Mediana S/33 | Familiar S/43</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Peperoni" data-ingredientes="Peperoni, Mozzarella, Salsa especial">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>

        <!-- Margarita -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/margarita.jpg" alt="Margarita" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Pizza Margarita</h5>
                    <p class="card-text">Tomate, Mozzarella y Albahaca Fresca.</p>
                    <p><strong>Precios:</strong> Personal S/20 | Mediana S/30 | Familiar S/40</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Margarita" data-ingredientes="Tomate, Mozzarella, Albahaca">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>

        <!-- Intercontinental -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/intercontinental.jpg" alt="Intercontinental" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Pizza Intercontinental</h5>
                    <p class="card-text">Carne, Pollo, Tocino, Pimiento y Queso.</p>
                    <p><strong>Precios:</strong> Personal S/26 | Mediana S/36 | Familiar S/46</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Intercontinental" data-ingredientes="Carne, Pollo, Tocino, Pimiento, Queso">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>

        <!-- Mega Intercontinental -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/megainter.jpg" alt="Mega Intercontinental" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Mega Intercontinental</h5>
                    <p class="card-text">Todo lo de la Intercontinental + Jamón, Salchicha, Maíz.</p>
                    <p><strong>Precios:</strong> Personal S/28 | Mediana S/38 | Familiar S/48</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Mega Intercontinental" data-ingredientes="Carne, Pollo, Tocino, Pimiento, Queso, Jamón, Salchicha, Maíz">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>

        <!-- Quesolicia -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/quesolicia.jpg" alt="Quesolicia" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Pizza Quesolicia</h5>
                    <p class="card-text">Triple queso: Mozzarella, Cheddar y Parmesano.</p>
                    <p><strong>Precios:</strong> Personal S/22 | Mediana S/32 | Familiar S/42</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Quesolicia" data-ingredientes="Mozzarella, Cheddar, Parmesano">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>


        <!-- Estrella -->
        <div class="col">
            <div class="card h-100 text-center shadow">
                <img src="/img/estrella.jpg" alt="Estrella" class="pizza-img">
                <div class="card-body">
                    <h5 class="card-title">Pizza Estrella</h5>
                    <p class="card-text">Pepperoni, Champiñones y Queso Fundido.</p>
                    <p><strong>Precios:</strong> Personal S/24 | Mediana S/34 | Familiar S/44</p>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pedidoModal"
                            data-pizza="Estrella" data-ingredientes="Pepperoni, Champiñones, Queso fundido">
                        Ordenar Ahora
                    </button>
                </div>
            </div>
        </div>

    </div>
</main>


<div class="modal fade" id="pedidoModal" tabindex="-1" aria-labelledby="pedidoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Formulario de Pedido</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/pedidos}" th:object="${pedido}" method="post">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Pizza</label>
                            <input type="text" class="form-control mb-3" th:field="*{nombrePizza}" readonly>

                            <label class="form-label">Ingredientes</label>
                            <input type="text" class="form-control mb-3" th:field="*{ingredientes}" readonly>

                            <label class="form-label">Tamaño</label>
                            <label class="form-label">Selecciona el tamaño</label>
                            <select class="form-select" th:field="*{tamanio}" required>
                                <option value="">Elige una opción</option>
                                <option value="Personal">Personal (S/ 20.00)</option>
                                <option value="Mediana">Mediana (S/ 30.00)</option>
                                <option value="Grande">Grande (S/ 40.00)</option>
                            </select>

                            <label class="form-label">Cantidad</label>
                            <input type="number" class="form-control mb-3" th:field="*{cantidad}" min="1" value="1">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Nombre Completo</label>
                            <input type="text" class="form-control mb-3" th:field="*{cliente}" required>

                            <label class="form-label">Dirección de Entrega</label>
                            <input type="text" class="form-control mb-3" th:field="*{direccionEntrega}" required>

                            <label class="form-label">Teléfono</label>
                            <input type="tel" class="form-control mb-3" th:field="*{telefonoContacto}" pattern="[0-9]{9}" required>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-danger btn-lg">Confirmar Pedido</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const modal = document.getElementById('pedidoModal');
        modal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget;
            modal.querySelector('input[name="nombrePizza"]').value = button.getAttribute('data-pizza');
            modal.querySelector('input[name="ingredientes"]').value = button.getAttribute('data-ingredientes');
        });
    });
</script>
</body>
</html>
